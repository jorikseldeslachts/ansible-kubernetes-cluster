# Debug
- name: Wait for nodes to get ready
  shell: kubectl --kubeconfig=/home/{{k8s_user}}/.kube/config get nodes
  register: get_nodes
  when: inventory_hostname == main_master
  until:
    - get_nodes.stdout.find("NotReady") == -1
  retries: 20
  delay: 10

- name: Kubernetes installation complete
  debug:
    msg:
      - "Kubernetes installation complete"
      - "{{ get_nodes.stdout_lines }}"
  when: inventory_hostname == main_master

# print status messages:
# - docker status/info
# - kubectl
# kubens
# reinit van masters/joins tegengaan van nodes die al gejoined zijn
# enkel joinen als nog geen deel
# k9s